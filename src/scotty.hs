{-# LANGUAGE OverloadedStrings #-}

import System.Environment
import Web.Scotty
import qualified Data.ByteString as S
import qualified Data.ByteString.Lazy as L

main :: IO ()
main = do
    port:_ <- getArgs
    scotty (read port) $ do
        get "/echo/hello-world" $ raw "Hello World"
        get "/echo/plain/:param/:int" $ do
            p <- param "param"
            i <- param "int"
            raw . L.fromChunks $ replicate i p

        get "/deep/foo/bar/baz/0" $ raw "deep"
        get "/deep/foo/bar/baz/1" $ raw "deep"
        get "/deep/foo/bar/baz/2" $ raw "deep"
        get "/deep/foo/bar/baz/3" $ raw "deep"
        get "/deep/foo/bar/baz/4" $ raw "deep"
        get "/deep/foo/bar/baz/5" $ raw "deep"
        get "/deep/foo/bar/baz/6" $ raw "deep"
        get "/deep/foo/bar/baz/7" $ raw "deep"
        get "/deep/foo/bar/baz/8" $ raw "deep"
        get "/deep/foo/bar/baz/9" $ raw "deep"
        get "/deep/foo/bar/baz/10" $ raw "deep"
        get "/deep/foo/bar/baz/11" $ raw "deep"
        get "/deep/foo/bar/baz/12" $ raw "deep"
        get "/deep/foo/bar/baz/13" $ raw "deep"
        get "/deep/foo/bar/baz/14" $ raw "deep"
        get "/deep/foo/bar/baz/15" $ raw "deep"
        get "/deep/foo/bar/baz/16" $ raw "deep"
        get "/deep/foo/bar/baz/17" $ raw "deep"
        get "/deep/foo/bar/baz/18" $ raw "deep"
        get "/deep/foo/bar/baz/19" $ raw "deep"
        get "/deep/foo/bar/baz/20" $ raw "deep"
        get "/deep/foo/bar/baz/21" $ raw "deep"
        get "/deep/foo/bar/baz/22" $ raw "deep"
        get "/deep/foo/bar/baz/23" $ raw "deep"
        get "/deep/foo/bar/baz/24" $ raw "deep"
        get "/deep/foo/bar/baz/25" $ raw "deep"
        get "/deep/foo/bar/baz/26" $ raw "deep"
        get "/deep/foo/bar/baz/27" $ raw "deep"
        get "/deep/foo/bar/baz/28" $ raw "deep"
        get "/deep/foo/bar/baz/29" $ raw "deep"
        get "/deep/foo/bar/baz/30" $ raw "deep"
        get "/deep/foo/bar/baz/31" $ raw "deep"
        get "/deep/foo/bar/baz/32" $ raw "deep"
        get "/deep/foo/bar/baz/33" $ raw "deep"
        get "/deep/foo/bar/baz/34" $ raw "deep"
        get "/deep/foo/bar/baz/35" $ raw "deep"
        get "/deep/foo/bar/baz/36" $ raw "deep"
        get "/deep/foo/bar/baz/37" $ raw "deep"
        get "/deep/foo/bar/baz/38" $ raw "deep"
        get "/deep/foo/bar/baz/39" $ raw "deep"
        get "/deep/foo/bar/baz/40" $ raw "deep"
        get "/deep/foo/bar/baz/41" $ raw "deep"
        get "/deep/foo/bar/baz/42" $ raw "deep"
        get "/deep/foo/bar/baz/43" $ raw "deep"
        get "/deep/foo/bar/baz/44" $ raw "deep"
        get "/deep/foo/bar/baz/45" $ raw "deep"
        get "/deep/foo/bar/baz/46" $ raw "deep"
        get "/deep/foo/bar/baz/47" $ raw "deep"
        get "/deep/foo/bar/baz/48" $ raw "deep"
        get "/deep/foo/bar/baz/49" $ raw "deep"
        get "/deep/foo/bar/baz/50" $ raw "deep"
        get "/deep/foo/bar/baz/51" $ raw "deep"
        get "/deep/foo/bar/baz/52" $ raw "deep"
        get "/deep/foo/bar/baz/53" $ raw "deep"
        get "/deep/foo/bar/baz/54" $ raw "deep"
        get "/deep/foo/bar/baz/55" $ raw "deep"
        get "/deep/foo/bar/baz/56" $ raw "deep"
        get "/deep/foo/bar/baz/57" $ raw "deep"
        get "/deep/foo/bar/baz/58" $ raw "deep"
        get "/deep/foo/bar/baz/59" $ raw "deep"
        get "/deep/foo/bar/baz/60" $ raw "deep"
        get "/deep/foo/bar/baz/61" $ raw "deep"
        get "/deep/foo/bar/baz/62" $ raw "deep"
        get "/deep/foo/bar/baz/63" $ raw "deep"
        get "/deep/foo/bar/baz/64" $ raw "deep"
        get "/deep/foo/bar/baz/65" $ raw "deep"
        get "/deep/foo/bar/baz/66" $ raw "deep"
        get "/deep/foo/bar/baz/67" $ raw "deep"
        get "/deep/foo/bar/baz/68" $ raw "deep"
        get "/deep/foo/bar/baz/69" $ raw "deep"
        get "/deep/foo/bar/baz/70" $ raw "deep"
        get "/deep/foo/bar/baz/71" $ raw "deep"
        get "/deep/foo/bar/baz/72" $ raw "deep"
        get "/deep/foo/bar/baz/73" $ raw "deep"
        get "/deep/foo/bar/baz/74" $ raw "deep"
        get "/deep/foo/bar/baz/75" $ raw "deep"
        get "/deep/foo/bar/baz/76" $ raw "deep"
        get "/deep/foo/bar/baz/77" $ raw "deep"
        get "/deep/foo/bar/baz/78" $ raw "deep"
        get "/deep/foo/bar/baz/79" $ raw "deep"
        get "/deep/foo/bar/baz/80" $ raw "deep"
        get "/deep/foo/bar/baz/81" $ raw "deep"
        get "/deep/foo/bar/baz/82" $ raw "deep"
        get "/deep/foo/bar/baz/83" $ raw "deep"
        get "/deep/foo/bar/baz/84" $ raw "deep"
        get "/deep/foo/bar/baz/85" $ raw "deep"
        get "/deep/foo/bar/baz/86" $ raw "deep"
        get "/deep/foo/bar/baz/87" $ raw "deep"
        get "/deep/foo/bar/baz/88" $ raw "deep"
        get "/deep/foo/bar/baz/89" $ raw "deep"
        get "/deep/foo/bar/baz/90" $ raw "deep"
        get "/deep/foo/bar/baz/91" $ raw "deep"
        get "/deep/foo/bar/baz/92" $ raw "deep"
        get "/deep/foo/bar/baz/93" $ raw "deep"
        get "/deep/foo/bar/baz/94" $ raw "deep"
        get "/deep/foo/bar/baz/95" $ raw "deep"
        get "/deep/foo/bar/baz/96" $ raw "deep"
        get "/deep/foo/bar/baz/97" $ raw "deep"
        get "/deep/foo/bar/baz/98" $ raw "deep"
        get "/deep/foo/bar/baz/99" $ raw "deep"
        get "/deep/foo/bar/baz/100" $ raw "deep"

        get "/after" $ raw "after"
